# ArtDocMedia
**[artdoc.media](https://artdoc.media/en/)**

## Последний баг
[Неправильный вывод фильмов в филмографии автора](https://github.com/weymoz/artdoc-fe/commit/a12f84709edb2e6304f44da632fabc3fdb86d7d9)


## Установка

```sh
https://github.com/weymoz/artdoc-fe
cd frontend
npm i
```

## Разработка

```sh
npm run dev
```
запускает команду `enb make`, которая стартует сервер с `nodemon`, который автоматически будет перезапускать при изменениях. Таже `chokidar` будет следить за изменениями в `*.blocks/**` и автоматически пересобирать проект, а `livereload` обновит открытые в браузере страницы.

Чтобы отключить автоматическую перезагрузку в браузере, достаточно запустить сборку с переменной окружения `NO_LIVERELOAD`:
```sh
NO_LIVERELOAD=1 npm run dev
```

Пересборку можно запустить вручную с `enb make` или с другим внешним вотчером (например, `npm run watch`). Для отключения автоматической пересборки достаточно запуститься с переменной окружения `NO_AUTOMAKE`:
```sh
NO_AUTOMAKE=1 npm run dev
```

## Релиз

```sh
YENV=production enb make
NODE_ENV=production node server
```

## Шаблонизация

Шаблоны инициируются в блоке `root`, который подменяет себя на `page` или другой контекст (если он определён в аргументе функции `render`).

## Дополнительно

Запуск сервера с переменной окружения `NODE_ENV=development` (`nodemon` уже настроен на такое поведение).

В режиме разработки:

* Добавить `?json=1` к URL, чтобы увидеть сырые данные
* Добавить `?bemjson=1` к URL, чтобы увидеть генерируемый BEMJSON с BEMTREE-шаблонами.
